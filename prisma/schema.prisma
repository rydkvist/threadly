generator client {
    provider = "prisma-client"
    output   = "../.generated/prisma"
}

datasource db {
    provider = "sqlite"
}

model User {
    id       Int                 @id @default(autoincrement())
    username String              @unique
    password String
    threads  ThreadParticipant[]
    messages Message[]
}

model Thread {
    id           Int                 @id @default(autoincrement())
    participants ThreadParticipant[]
    messages     Message[]
    createdAt    DateTime            @default(now())
}

model ThreadParticipant {
    id       Int    @id @default(autoincrement())
    thread   Thread @relation(fields: [threadId], references: [id])
    threadId Int
    user     User   @relation(fields: [userId], references: [id])
    userId   Int
}

model Message {
    id        Int      @id @default(autoincrement())
    text      String
    thread    Thread   @relation(fields: [threadId], references: [id])
    threadId  Int
    sender    User     @relation(fields: [senderId], references: [id])
    senderId  Int
    createdAt DateTime @default(now())
}
